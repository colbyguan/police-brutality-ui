(this["webpackJsonppolice-brutality-ui"]=this["webpackJsonppolice-brutality-ui"]||[]).push([[0],{172:function(e,t,n){e.exports=n(232)},177:function(e,t,n){},220:function(e,t){},230:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(170),c=n.n(o),l=(n(177),n(40)),i=n(99),s=n.n(i),u=(n(230),new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",timeZone:"UTC"})),m=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",timeZone:"UTC"}),d={0:"Browse all",1:"Browse by date",2:"Browse by state"},f={twitter:"bg-blue-500",reddit:"bg-orange-400",redd:"bg-orange-400"};var p=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=(t[0],t[1],Object(a.useState)(null)),o=Object(l.a)(n,2),c=o[0],i=o[1],p=Object(a.useState)(1),b=Object(l.a)(p,2),g=b[0],y=b[1],v=Object(a.useState)(null),w=Object(l.a)(v,2),h=w[0],E=w[1],x=Object(a.useState)(null),k=Object(l.a)(x,2),j=k[0],N=k[1],O=Object(a.useState)([]),D=Object(l.a)(O,2),S=D[0],C=D[1];Object(a.useEffect)((function(){fetch("https://api.846policebrutality.com/api/incidents").then((function(e){return e.json()})).then((function(e){if(!("data"in e))throw"Missing key 'data' in Github response";var t=e.data,n=new s.a(t,["id","pb_id","state","city","date","title","links"]);return n.map((function(e){var t=new Date(e.get("date"));e.set("date",new Date(t.getFullYear(),t.getMonth(),t.getDate()))})),n})).then((function(e){i(e),E(B(e)[0][2]),N(U(e)[0][2])})).catch((function(e){return console.error(e)}))}),[]),Object(a.useEffect)((function(){I()}),[g,j,h]);var I=function(){if(null!==c){var e=[];0===g?(e=c.toCollection()).sort((function(e,t){return t.date===e.date?e.state.localeCompare(t.state):new Date(t.date)-new Date(e.date)})):1===g?(e=c.filter((function(e){return e.get("date")===h})).toCollection()).sort((function(e,t){return new Date(t.date)-new Date(e.date)})):2===g&&(e=c.filter((function(e){return e.get("state")===j})).toCollection()).sort((function(e,t){return new Date(t.date)-new Date(e.date)})),C(e)}},U=function(e){var t=e.unique("state").transpose().toArray()[0],n={};return t.forEach((function(t){n[t]=e.countValue(t,"state")})),Object.keys(n).map((function(e){return[e,n[e],e]})).sort((function(e,t){return e[0].localeCompare(t[0])}))},B=function(e){var t=e.unique("date").transpose().toArray()[0],n={};return t.forEach((function(t){n[t]=e.countValue(t,"date")})),Object.keys(n).map((function(e){return[new Date(e),n[e],e]})).sort((function(e,t){return t[0]-e[0]})).map((function(e){return[e[0].getFullYear()<2020?"Unknown Date":u.format(e[0]),e[1],e[2]]}))},F=function(e){return 1===g?e===h:e===j},T=function(e){for(var t=new URL(e),n=0,a=Object.keys(f);n<a.length;n++){var r=a[n];if(t.host.includes(r))return f[r]}return"bg-gray-400"};return r.a.createElement("div",{className:"container mx-auto"},r.a.createElement("div",{className:"my-6 text-3xl"},"Police Brutality During the 2020 George Floyd Protests"),r.a.createElement("div",{className:"flex my-4"},r.a.createElement("div",{className:"w-1/4"},null!==c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-col items-start mb-4"},Object.keys(d).map((function(e){return r.a.createElement("div",{key:e,className:"px-2 py-1 rounded-md ".concat(parseInt(e)===parseInt(g)?"bg-orange-200":""),onClick:function(){return function(e){y(parseInt(e))}(e)}},d[e])}))),r.a.createElement("div",{className:"flex flex-col items-start"},function(){var e=parseInt(g);return 0===e?[]:1===e?B(c):U(c)}().map((function(e){return r.a.createElement("div",{onClick:function(){return t=e[2],void(1===g?E(t):N(t));var t},className:"cursor-pointer px-2 py-1 rounded-md transition-all ease-linear duration-300 hover:text-black\n                          ".concat(F(e[2])?"font-semibold bg-orange-200 text-black":"text-gray-600"),key:e[2]},r.a.createElement("span",null,e[0]),r.a.createElement("span",{className:"ml-2 px-1 rounded-md ".concat(F(e[2])?"bg-orange-400":"bg-gray-400")},e[1]))}))))),r.a.createElement("div",{className:"w-3/4"},S.map((function(e){return r.a.createElement("div",{key:e.pb_id,className:"max-w-full rounded overflow-hidden border border-gray-400 mb-4"},r.a.createElement("div",{className:"px-6 py-4"},r.a.createElement("div",{className:"mb-2"},r.a.createElement("span",{className:"font-bold text-gray-800 mr-2"},m.format(new Date(e.date))),r.a.createElement("span",{className:"uppercase font-semibold text-sm text-gray-700 mr-1"},e.city,","),r.a.createElement("span",{className:"uppercase font-semibold text-sm text-gray-600"},e.state)),r.a.createElement("div",{className:"mb-2"},r.a.createElement("p",null,e.title)),r.a.createElement("div",null,r.a.createElement("span",{className:"uppercase font-bold text-gray-600 text-xs mr-2"},"Sources: "),e.links.map((function(e){return r.a.createElement("span",{className:"inline-block rounded-full px-3 py-1 font-semibold text-sm mr-2 ".concat(T(e))},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e},function(e){return new URL(e).host}(e)))})))))})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[172,1,2]]]);
//# sourceMappingURL=main.e2cc8f56.chunk.js.map